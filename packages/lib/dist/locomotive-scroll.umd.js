!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lenis")):"function"==typeof define&&define.amd?define(["lenis"],e):(t||self).locomotiveScroll=e(t.lenis)}(this,function(t){function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=/*#__PURE__*/e(t);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return s(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r.apply(null,arguments)}var o=/*#__PURE__*/function(){function t(t){var e=t.scrollElements,i=t.rootMargin,s=void 0===i?"-1px -1px -1px -1px":i,n=t.IORaf;this.scrollElements=void 0,this.rootMargin=void 0,this.IORaf=void 0,this.observer=void 0,this.scrollElements=e,this.rootMargin=s,this.IORaf=n,this._init()}var e=t.prototype;return e._init=function(){var t=this;this.observer=new IntersectionObserver(function(e){e.forEach(function(e){var i=t.scrollElements.find(function(t){return t.$el===e.target});e.isIntersecting?(i&&(i.isAlreadyIntersected=!0),t._setInview(e)):i&&i.isAlreadyIntersected&&t._setOutOfView(e)})},{rootMargin:this.rootMargin});for(var e,i=n(this.scrollElements);!(e=i()).done;)this.observe(e.value.$el)},e.destroy=function(){this.observer.disconnect()},e.observe=function(t){t&&this.observer.observe(t)},e.unobserve=function(t){t&&this.observer.unobserve(t)},e._setInview=function(t){var e=this.scrollElements.find(function(e){return e.$el===t.target});this.IORaf&&(null==e||e.setInteractivityOn()),!this.IORaf&&(null==e||e.setInview())},e._setOutOfView=function(t){var e=this.scrollElements.find(function(e){return e.$el===t.target});this.IORaf&&(null==e||e.setInteractivityOff()),!this.IORaf&&(null==e||e.setOutOfView()),null!=e&&e.attributes.scrollRepeat||this.IORaf||this.unobserve(t.target)},t}();function l(t,e,i,s,n){return i+((n-t)/(e-t)*(s-i)||0)}function a(t,e){return t.reduce(function(t,i){return Math.abs(i-e)<Math.abs(t-e)?i:t})}var c="--progress",h=/*#__PURE__*/function(){function t(t){var e,i,s,n,r,o=t.$el,l=t.id,a=t.subscribeElementUpdateFn,c=t.unsubscribeElementUpdateFn,h=t.needRaf,u=t.scrollOrientation;this.$el=void 0,this.id=void 0,this.needRaf=void 0,this.attributes=void 0,this.scrollOrientation=void 0,this.isAlreadyIntersected=void 0,this.intersection=void 0,this.metrics=void 0,this.currentScroll=void 0,this.translateValue=void 0,this.progress=void 0,this.lastProgress=void 0,this.isInview=void 0,this.isInteractive=void 0,this.isInFold=void 0,this.isFirstResize=void 0,this.subscribeElementUpdateFn=void 0,this.unsubscribeElementUpdateFn=void 0,this.getWindowSize=void 0,this.getMetricsStart=void 0,this.getMetricsSize=void 0,this.startPositionHandlers={start:function(t,e,i){return t-e+i},middle:function(t,e,i,s){return t-e+i+.5*s},end:function(t,e,i,s){return t-e+i+s},fold:function(){return 0}},this.endPositionHandlers={start:function(t,e){return t-e},middle:function(t,e,i){return t-e+.5*i},end:function(t,e,i){return t-e+i}},this.$el=o,this.id=l,this.needRaf=h,this.scrollOrientation=u,this.subscribeElementUpdateFn=a,this.unsubscribeElementUpdateFn=c,this.attributes={scrollClass:null!=(e=this.$el.dataset.scrollClass)?e:"is-inview",scrollOffset:null!=(i=this.$el.dataset.scrollOffset)?i:"0,0",scrollPosition:null!=(s=this.$el.dataset.scrollPosition)?s:"start,end",scrollCssProgress:void 0!==this.$el.dataset.scrollCssProgress,scrollEventProgress:null!=(n=this.$el.dataset.scrollEventProgress)?n:null,scrollSpeed:void 0!==this.$el.dataset.scrollSpeed?parseFloat(this.$el.dataset.scrollSpeed):null,scrollRepeat:void 0!==this.$el.dataset.scrollRepeat,scrollCall:null!=(r=this.$el.dataset.scrollCall)?r:null,scrollIgnoreFold:void 0!==this.$el.dataset.scrollIgnoreFold,scrollEnableTouchSpeed:void 0!==this.$el.dataset.scrollEnableTouchSpeed},this.intersection={start:0,end:0},this.metrics={offsetStart:0,offsetEnd:0,bcr:{}},this.currentScroll="vertical"===this.scrollOrientation?window.scrollY:window.scrollX,this.translateValue=0,this.progress=0,this.lastProgress=null,this.isInview=!1,this.isInteractive=!1,this.isAlreadyIntersected=!1,this.isInFold=!1,this.isFirstResize=!0,this.getWindowSize="vertical"===this.scrollOrientation?function(){return window.innerHeight}:function(){return window.innerWidth},this.getMetricsStart="vertical"===this.scrollOrientation?function(t){return t.top}:function(t){return t.left},this.getMetricsSize="vertical"===this.scrollOrientation?function(t){return t.height}:function(t){return t.width},this._init()}var e=t.prototype;return e._init=function(){this.needRaf&&this._resize()},e.onResize=function(t){this.currentScroll=t.currentScroll,this._resize()},e.onRender=function(t){var e=t.currentScroll,i=t.smooth,s=this.getWindowSize();if(this.currentScroll=e,this._computeProgress(),this.attributes.scrollSpeed&&!isNaN(this.attributes.scrollSpeed))if(this.attributes.scrollEnableTouchSpeed||i){if(this.isInFold){var n=Math.max(0,this.progress);this.translateValue=n*s*this.attributes.scrollSpeed*-1}else{var r=l(0,1,-1,1,this.progress);this.translateValue=r*s*this.attributes.scrollSpeed*-1}this.$el.style.transform="vertical"===this.scrollOrientation?"translate3d(0, "+this.translateValue+"px, 0)":"translate3d("+this.translateValue+"px, 0, 0)"}else this.translateValue&&(this.$el.style.transform="translate3d(0, 0, 0)"),this.translateValue=0},e.setInview=function(){if(!this.isInview){this.isInview=!0,this.$el.classList.add(this.attributes.scrollClass);var t=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("enter",t)}},e.setOutOfView=function(){if(this.isInview&&this.attributes.scrollRepeat){this.isInview=!1,this.$el.classList.remove(this.attributes.scrollClass);var t=this._getScrollCallFrom();this.attributes.scrollCall&&this._dispatchCall("leave",t)}},e.setInteractivityOn=function(){this.isInteractive||(this.isInteractive=!0,this.subscribeElementUpdateFn(this))},e.setInteractivityOff=function(){this.isInteractive&&(this.isInteractive=!1,this.unsubscribeElementUpdateFn(this),null!==this.lastProgress&&this._computeProgress(a([0,1],this.lastProgress)))},e._resize=function(){this.metrics.bcr=this.$el.getBoundingClientRect(),this._computeMetrics(),this._computeIntersection(),this.isFirstResize&&(this.isFirstResize=!1,this.isInFold&&this.setInview())},e._computeMetrics=function(){var t=this.getWindowSize(),e=this.getMetricsStart(this.metrics.bcr),i=this.getMetricsSize(this.metrics.bcr);this.metrics.offsetStart=this.currentScroll+e-this.translateValue,this.metrics.offsetEnd=this.metrics.offsetStart+i,this.isInFold=this.metrics.offsetStart<t&&!this.attributes.scrollIgnoreFold},e._computeIntersection=function(){var t,e,i,s,n,r,o,l,a=this.getWindowSize(),c=this.getMetricsSize(this.metrics.bcr),h=this.attributes.scrollOffset.split(","),u=null!=(t=null==(e=h[0])?void 0:e.trim())?t:"0",d=null!=(i=null==(s=h[1])?void 0:s.trim())?i:"0",f=this.attributes.scrollPosition.split(","),v=null!=(n=null==(r=f[0])?void 0:r.trim())?n:"start",m=null!=(o=null==(l=f[1])?void 0:l.trim())?o:"end",g=u.includes("%")?a*parseInt(u.replace("%","").trim())*.01:parseInt(u),b=d.includes("%")?a*parseInt(d.replace("%","").trim())*.01:parseInt(d);this.isInFold&&(v="fold");var p=this.startPositionHandlers[v];this.intersection.start=p?p(this.metrics.offsetStart,a,g,c):this.metrics.offsetStart-a+g;var E=this.endPositionHandlers[m];if(this.intersection.end=E?E(this.metrics.offsetStart,b,c):this.metrics.offsetStart-b+c,this.intersection.end<=this.intersection.start)switch(m){case"start":default:this.intersection.end=this.intersection.start+1;break;case"middle":this.intersection.end=this.intersection.start+.5*c;break;case"end":this.intersection.end=this.intersection.start+c}},e._computeProgress=function(t){var e,i=null!=t?t:(e=l(this.intersection.start,this.intersection.end,0,1,this.currentScroll))<0?0:e>1?1:e;this.progress=i,i!==this.lastProgress&&(this.lastProgress=i,this.attributes.scrollCssProgress&&this._setCssProgress(i),this.attributes.scrollEventProgress&&this._setCustomEventProgress(i),i>0&&i<1&&this.setInview(),0===i&&this.setOutOfView(),1===i&&this.setOutOfView())},e._setCssProgress=function(t){void 0===t&&(t=0),this.$el.style.setProperty(c,t.toString())},e._setCustomEventProgress=function(t){void 0===t&&(t=0);var e=this.attributes.scrollEventProgress;if(e){var i=new CustomEvent(e,{detail:{target:this.$el,progress:t}});window.dispatchEvent(i)}},e._getScrollCallFrom=function(){var t=a([this.intersection.start,this.intersection.end],this.currentScroll);return this.intersection.start===t?"start":"end"},e.destroy=function(){this.attributes.scrollCssProgress&&this.$el.style.removeProperty(c),this.attributes.scrollSpeed&&this.$el.style.removeProperty("transform"),this.isInview&&this.attributes.scrollClass&&this.$el.classList.remove(this.attributes.scrollClass)},e._dispatchCall=function(t,e){var i=this.attributes.scrollCall;if(i){var s=new CustomEvent(i,{detail:{target:this.$el,way:t,from:e}});window.dispatchEvent(s)}},t}(),u=["scrollOffset","scrollPosition","scrollCssProgress","scrollEventProgress","scrollSpeed"],d=/*#__PURE__*/function(){function t(t){var e=t.$el,i=t.triggerRootMargin,s=t.rafRootMargin,n=t.scrollOrientation;this.$scrollContainer=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.scrollElements=void 0,this.triggeredScrollElements=void 0,this.RAFScrollElements=void 0,this.scrollElementsToUpdate=void 0,this.IOTriggerInstance=void 0,this.IORafInstance=void 0,this.scrollOrientation=void 0,e?(this.$scrollContainer=e,this.scrollOrientation=n,this.triggerRootMargin=null!=i?i:"-1px -1px -1px -1px",this.rafRootMargin=null!=s?s:"100% 100% 100% 100%",this.scrollElements=[],this.triggeredScrollElements=[],this.RAFScrollElements=[],this.scrollElementsToUpdate=[],this._init()):console.error("Please provide a DOM Element as scrollContainer")}var e=t.prototype;return e._init=function(){var t=this.$scrollContainer.querySelectorAll("[data-scroll]"),e=this.toElementArray(t);this._subscribeScrollElements(e),this.IOTriggerInstance=new o({scrollElements:[].concat(this.triggeredScrollElements),rootMargin:this.triggerRootMargin,IORaf:!1}),this.IORafInstance=new o({scrollElements:[].concat(this.RAFScrollElements),rootMargin:this.rafRootMargin,IORaf:!0})},e.destroy=function(){this.IOTriggerInstance.destroy(),this.IORafInstance.destroy(),this._unsubscribeAllScrollElements()},e.onResize=function(t){for(var e,i=t.currentScroll,s=n(this.RAFScrollElements);!(e=s()).done;)e.value.onResize({currentScroll:i})},e.onRender=function(t){for(var e,i=t.currentScroll,s=t.smooth,r=n(this.scrollElementsToUpdate);!(e=r()).done;)e.value.onRender({currentScroll:i,smooth:s})},e.removeScrollElements=function(t){var e=this,i=t.querySelectorAll("[data-scroll]");if(i.length){for(var s=new Set(Array.from(i)),n=0;n<this.triggeredScrollElements.length;n++){var r=this.triggeredScrollElements[n];s.has(r.$el)&&(this.IOTriggerInstance.unobserve(r.$el),this.triggeredScrollElements.splice(n,1))}for(var o=0;o<this.RAFScrollElements.length;o++){var l=this.RAFScrollElements[o];s.has(l.$el)&&(this.IORafInstance.unobserve(l.$el),this.RAFScrollElements.splice(o,1))}i.forEach(function(t){var i=e.scrollElementsToUpdate.find(function(e){return e.$el===t}),s=e.scrollElements.find(function(e){return e.$el===t});i&&e._unsubscribeElementUpdate(i),s&&(e.scrollElements=e.scrollElements.filter(function(t){return t.id!=s.id}))})}},e.addScrollElements=function(t){var e=t.querySelectorAll("[data-scroll]"),i=[];this.scrollElements.forEach(function(t){i.push(t.id)});var s=Math.max.apply(Math,i.concat([0]))+1,n=this.toElementArray(e);this._subscribeScrollElements(n,s,!0)},e._subscribeScrollElements=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);for(var s=0;s<t.length;s++){var n=t[s],r=this._checkRafNeeded(n),o=new h({$el:n,id:e+s,scrollOrientation:this.scrollOrientation,subscribeElementUpdateFn:this._subscribeElementUpdate.bind(this),unsubscribeElementUpdateFn:this._unsubscribeElementUpdate.bind(this),needRaf:r});this.scrollElements.push(o),r?(this.RAFScrollElements.push(o),i&&(this.IORafInstance.scrollElements.push(o),this.IORafInstance.observe(o.$el))):(this.triggeredScrollElements.push(o),i&&(this.IOTriggerInstance.scrollElements.push(o),this.IOTriggerInstance.observe(o.$el)))}},e._unsubscribeAllScrollElements=function(){for(var t,e=n(this.scrollElements);!(t=e()).done;)t.value.destroy();this.scrollElements=[],this.RAFScrollElements=[],this.triggeredScrollElements=[],this.scrollElementsToUpdate=[]},e._subscribeElementUpdate=function(t){this.scrollElementsToUpdate.push(t)},e._unsubscribeElementUpdate=function(t){this.scrollElementsToUpdate=this.scrollElementsToUpdate.filter(function(e){return e.id!=t.id})},e.toElementArray=function(t){return Array.from(t)},e._checkRafNeeded=function(t){var e=[].concat(u),i=function(t){e=e.filter(function(e){return e!==t})};if(t.dataset.scrollOffset){if("0,0"!==t.dataset.scrollOffset.split(",").map(function(t){return t.replace("%","").trim()}).join(","))return!0;i("scrollOffset")}else i("scrollOffset");if(t.dataset.scrollPosition){if("top,bottom"!==t.dataset.scrollPosition.trim())return!0;i("scrollPosition")}else i("scrollPosition");if(t.dataset.scrollSpeed&&!isNaN(parseFloat(t.dataset.scrollSpeed)))return!0;i("scrollSpeed");for(var s,r=n(e);!(s=r()).done;)if(s.value in t.dataset)return!0;return!1},t}(),f=/*#__PURE__*/function(){function t(t){var e=t.resizeElements,i=t.resizeCallback,s=void 0===i?function(){}:i;this.$resizeElements=void 0,this.isFirstObserve=void 0,this.observer=void 0,this.resizeCallback=void 0,this.$resizeElements=e,this.resizeCallback=s,this.isFirstObserve=!0,this._init()}var e=t.prototype;return e._init=function(){var t=this;this.observer=new ResizeObserver(function(e){!t.isFirstObserve&&(null==t.resizeCallback||t.resizeCallback()),t.isFirstObserve=!1});for(var e,i=n(this.$resizeElements);!(e=i()).done;)this.observer.observe(e.value)},e.destroy=function(){this.observer.disconnect()},t}();/*#__PURE__*/
return function(){function t(t){var e=void 0===t?{}:t,i=e.lenisOptions,s=void 0===i?{}:i,n=e.triggerRootMargin,r=e.rafRootMargin,o=e.autoResize,l=void 0===o||o,a=e.autoStart,c=void 0===a||a,h=e.scrollCallback,u=void 0===h?function(){}:h,d=e.initCustomTicker,f=e.destroyCustomTicker;this.rafPlaying=void 0,this.lenisInstance=null,this.coreInstance=null,this.lenisOptions=void 0,this.triggerRootMargin=void 0,this.rafRootMargin=void 0,this.rafInstance=void 0,this.autoResize=void 0,this.autoStart=void 0,this.ROInstance=void 0,this.initCustomTicker=void 0,this.destroyCustomTicker=void 0,this._onRenderBind=void 0,this._onResizeBind=void 0,this._onScrollToBind=void 0,this.isTouchDevice=void 0;for(var v=0,m=Object.entries(s);v<m.length;v++){var g=m[v][0];["wrapper","content","infinite"].includes(g)&&console.warn('Warning: Key "'+g+'" is not possible to edit in Locomotive Scroll.')}Object.assign(this,{lenisOptions:s,triggerRootMargin:n,rafRootMargin:r,autoResize:l,autoStart:c,scrollCallback:u,initCustomTicker:d,destroyCustomTicker:f}),this._onRenderBind=this._onRender.bind(this),this._onScrollToBind=this._onScrollTo.bind(this),this._onResizeBind=this._onResize.bind(this),this.rafPlaying=!1,this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0,this._init()}var e=t.prototype;return e._init=function(){var t=this;this.lenisInstance=new i.default(r({},this.lenisOptions,{wrapper:window,content:document.documentElement,infinite:!1})),this.lenisInstance.on("scroll",this.scrollCallback),document.documentElement.setAttribute("data-scroll-orientation",this.lenisInstance.options.orientation),requestAnimationFrame(function(){t.coreInstance=new d({$el:t.lenisInstance.rootElement,triggerRootMargin:t.triggerRootMargin,rafRootMargin:t.rafRootMargin,scrollOrientation:t.lenisInstance.options.orientation}),t._bindEvents(),t.initCustomTicker&&!t.destroyCustomTicker?console.warn("initCustomTicker callback is declared, but destroyCustomTicker is not. Please pay attention. It could cause trouble."):!t.initCustomTicker&&t.destroyCustomTicker&&console.warn("destroyCustomTicker callback is declared, but initCustomTicker is not. Please pay attention. It could cause trouble."),t.autoStart&&t.start()})},e.destroy=function(){var t,e=this;this.stop(),this._unbindEvents(),null==(t=this.lenisInstance)||t.destroy(),requestAnimationFrame(function(){var t;null==(t=e.coreInstance)||t.destroy()})},e._bindEvents=function(){this._bindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance=new f({resizeElements:[document.body],resizeCallback:this._onResizeBind}):window.addEventListener("resize",this._onResizeBind))},e._unbindEvents=function(){this._unbindScrollToEvents(),this.autoResize&&("ResizeObserver"in window?this.ROInstance&&this.ROInstance.destroy():window.removeEventListener("resize",this._onResizeBind))},e._bindScrollToEvents=function(t){var e,i=this,s=t||(null==(e=this.lenisInstance)?void 0:e.rootElement),n=null==s?void 0:s.querySelectorAll("[data-scroll-to]");(null==n?void 0:n.length)&&n.forEach(function(t){t.addEventListener("click",i._onScrollToBind,!1)})},e._unbindScrollToEvents=function(t){var e,i=this,s=t||(null==(e=this.lenisInstance)?void 0:e.rootElement),n=null==s?void 0:s.querySelectorAll("[data-scroll-to]");(null==n?void 0:n.length)&&n.forEach(function(t){t.removeEventListener("click",i._onScrollToBind,!1)})},e._onResize=function(){var t=this;requestAnimationFrame(function(){var e,i,s;null==(e=t.coreInstance)||e.onResize({currentScroll:null!=(i=null==(s=t.lenisInstance)?void 0:s.scroll)?i:0,smooth:!t.isTouchDevice})})},e._onRender=function(){var t,e,i,s;null==(t=this.lenisInstance)||t.raf(Date.now()),null==(e=this.coreInstance)||e.onRender({currentScroll:null!=(i=null==(s=this.lenisInstance)?void 0:s.scroll)?i:0,smooth:!this.isTouchDevice})},e._onScrollTo=function(t){var e,i;t.preventDefault();var s=null!=(e=t.currentTarget)?e:null;if(s){var n=s.getAttribute("data-scroll-to-href")||s.getAttribute("href"),r=s.getAttribute("data-scroll-to-offset")||0,o=s.getAttribute("data-scroll-to-duration")||(null==(i=this.lenisInstance)?void 0:i.options.duration);n&&this.scrollTo(n,{offset:"string"==typeof r?parseInt(r):r,duration:"string"==typeof o?parseInt(o):o})}},e.start=function(){var t;this.rafPlaying||(null==(t=this.lenisInstance)||t.start(),this.rafPlaying=!0,this.initCustomTicker?this.initCustomTicker(this._onRenderBind):this._raf())},e.stop=function(){var t;this.rafPlaying&&(null==(t=this.lenisInstance)||t.stop(),this.rafPlaying=!1,this.destroyCustomTicker?this.destroyCustomTicker(this._onRenderBind):this.rafInstance&&cancelAnimationFrame(this.rafInstance))},e.removeScrollElements=function(t){var e;t?(this._unbindScrollToEvents(t),null==(e=this.coreInstance)||e.removeScrollElements(t)):console.error("Please provide a DOM Element as $oldContainer")},e.addScrollElements=function(t){var e,i=this;t?(null==(e=this.coreInstance)||e.addScrollElements(t),requestAnimationFrame(function(){i._bindScrollToEvents(t)})):console.error("Please provide a DOM Element as $newContainer")},e.resize=function(){this._onResizeBind()},e.scrollTo=function(t,e){var i;null==(i=this.lenisInstance)||i.scrollTo(t,{offset:null==e?void 0:e.offset,lerp:null==e?void 0:e.lerp,duration:null==e?void 0:e.duration,immediate:null==e?void 0:e.immediate,lock:null==e?void 0:e.lock,force:null==e?void 0:e.force,easing:null==e?void 0:e.easing,onComplete:null==e?void 0:e.onComplete})},e._raf=function(){var t=this;this._onRenderBind(),this.rafInstance=requestAnimationFrame(function(){return t._raf()})},t}()});
//# sourceMappingURL=locomotive-scroll.umd.js.map
